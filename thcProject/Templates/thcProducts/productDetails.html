{%extends 'thcProducts/base.html'%}
{% block title %}
{{product.prodTitle}}
{% endblock title %}
{% block body %}
<div class="container mt-4">
<div class="row no-gutters">
    <div class="col">
        <h1>{{product.prodTitle}}</h1>
        <p><b>Category: </b>{{product.prodCategory}}</p>
        <p><b>Sub-Category: </b>{{product.prodSubCategory}}</p>
        <p><b>Brand: </b>{{product.productBrand}}</p>
        <p><b>About Product: </b>{{product.prodDescription}}</p>
        <h4>MARKET PRICE:  <small>  &#x20b9; {{product.prodMarketPrice}}/-</small> </h4>
        <h4>Our PRICE: <small>  &#x20b9; {{product.prodThcPrice}}/-</small></h4>

        <br><button id="{{product.prodId}},{{product.prodTitle}},{{product.prodThcPrice}},{{product.prodImage1}}" onClick="getId(this.id)"type="button" class="btn btn-outline-success mb-2">Add to cart</button>
    </div>
    <div class="col">
        <iframe width="500" height="250" src={{product.prodVideoLink}} frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

        <img src="/media/{{product.prodImage1}}" height=200 width=200 >
        <img src=/media/{{product.prodImage2}} height=200 width=200>
        <img src=/media/{{product.prodImage3}} height=200 width=200>
        <img src=/media/{{product.prodImage4}} height=200 width=200>
        <img src=/media/{{product.prodImage5}} height=200 width=200>
        
    </div>
    <div class="row">
        <div class="col">
            
        </div>
    </div>
</div>

</div>
{% endblock body %}

{% block script %}

<script>
showCart();
var cart={}
var qty=0
function updateCart(prodTitle,prodPrice,prodImage1)
{
    
    if(!cart[prodTitle])
    {
        cart[prodTitle]=[qty+1,prodPrice,prodImage1];
        localStorage.setItem("cart",JSON.stringify(cart));
    }
    else
    {
        var newQty=cart[prodTitle][0]
        cart[prodTitle]=[newQty+1,prodPrice,prodImage1]
        localStorage.setItem("cart",JSON.stringify(cart));

    }
    console.log('cart:',cart);
    showCart();
}


function getId(id)
{
    var prodId=id;
    var pId=prodId.split(",")
    //console.log(pId);
    updateCart(pId[1],pId[2],pId[3]);
}
</script>
{% endblock script %}